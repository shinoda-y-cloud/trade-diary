<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥è¨˜ï¼ˆé¸æŠå¼ãƒ»30ç§’ï¼‰</title>

  <style>
    :root{
      --bg:#0b1020;
      --card:#151a33;
      --card2:#1b2142;
      --text:#e9eefc;
      --muted:#aab0d6;
      --accent:#6d7cff;
      --good:#4ee2a8;
      --bad:#ff6b6b;
      --line:rgba(255,255,255,0.12);
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif;
    }

    header{
      max-width:1100px;
      margin:20px auto 0;
      padding:0 16px;
    }

    h1{
      font-size:20px;
      margin:0 0 4px;
    }

    .sub{
      font-size:12px;
      color:var(--muted);
    }

    main{
      max-width:1100px;
      margin:12px auto 32px;
      padding:0 16px;
    }

    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:16px;
    }

    @media(min-width:960px){
      .grid{grid-template-columns:1.05fr .95fr}
    }

    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04));
      border:1px solid var(--line);
      border-radius:16px;
      box-shadow:0 12px 40px rgba(0,0,0,.45);
      overflow:hidden;
    }

    .card .hd{
      padding:12px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }

    .card .bd{
      padding:14px;
    }

    label{
      font-size:12px;
      color:var(--muted);
      display:block;
      margin-bottom:4px;
    }

    input,select,textarea,button{
      width:100%;
      padding:10px;
      border-radius:8px;
      border:1px solid var(--line);
      background:#0f1430;
      color:var(--text);
      font-size:14px;
    }

    textarea{resize:vertical}

    button.primary{
      background:var(--accent);
      border:none;
      font-weight:600;
      cursor:pointer;
    }

    button.danger{
      background:#a93b3b;
      border:none;
      font-weight:600;
      cursor:pointer;
    }

    .row{margin-bottom:12px}

    .stats{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:12px;
    }

    .stat{
      background:var(--card2);
      border-radius:12px;
      padding:12px;
      text-align:center;
      border:1px solid var(--line);
    }

    .stat .v{
      font-size:20px;
      margin-top:4px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
    }

    th,td{
      border-bottom:1px solid var(--line);
      padding:8px;
      text-align:left;
    }

    th{color:var(--muted)}

    /* ğŸ” ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ç”»é¢ */
    #lock{
      position:fixed;
      inset:0;
      background:var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }

    #lock .box{
      width:280px;
      text-align:center;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:14px;
      padding:20px;
    }

    #lock h2{margin:0 0 8px}
    #lock p{font-size:12px;color:var(--muted)}

  </style>
</head>

<body>

<!-- ğŸ” LOCK -->
<div id="lock">
  <div class="box">
    <h2>ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥è¨˜</h2>
    <p>ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    <input id="pass" type="password" placeholder="Passcode">
    <button class="primary" style="margin-top:12px" onclick="unlock()">é–‹ã</button>
    <p id="err" style="display:none;color:var(--bad);font-size:12px;margin-top:8px">
      ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™
    </p>
  </div>
</div>

<header>
  <h1>ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥è¨˜ï¼ˆé¸æŠå¼ãƒ»30ç§’ï¼‰</h1>
  <div class="sub">
    å…¥åŠ›ã¯åŸºæœ¬ã€Œé¸æŠã€ã ã‘ã€‚ä¿å­˜ã¯ãƒ­ãƒ¼ã‚«ãƒ«ï¼GitHubã€‚è¤‡æ•°ç«¯æœ«ã¯GitHubãŒæ­£ã€‚
  </div>
</header>

<main>
  <div class="grid">

    <!-- å…¥åŠ› -->
    <div class="card">
      <div class="hd">
        <strong>ä»Šæ—¥ã®è¨˜éŒ²</strong>
        <div>
          <button onclick="alert('æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã§å®Ÿè£…')" >GitHubè¨­å®š</button>
        </div>
      </div>
      <div class="bd">

        <div class="row">
          <label>æ—¥ä»˜</label>
          <input id="date" type="date">
        </div>

        <div class="row">
          <label>æœ¬æ—¥ã®çµæœ</label>
          <select id="result">
            <option>æœªå…¥åŠ›</option>
            <option>å‹ã¡</option>
            <option>è² ã‘</option>
            <option>å¼•ãåˆ†ã‘</option>
          </select>
        </div>

        <div class="row">
          <label>æç›Šï¼ˆå††ãƒ»ã–ã£ãã‚Šï¼‰</label>
          <input id="pnl" placeholder="ä¾‹ï¼š-4000 / 6500">
        </div>

        <div class="row">
          <label>ä¸»æˆ¦éŠ˜æŸ„</label>
          <select id="symbol" multiple size="5">
            <option>8031 ä¸‰äº•ç‰©ç”£</option>
            <option>8058 ä¸‰è±å•†äº‹</option>
            <option>9503 é–¢è¥¿é›»åŠ›</option>
            <option>5020 ENEOS</option>
            <option>5401 æ—¥æœ¬è£½é‰„</option>
            <option>3099 ä¸‰è¶Šä¼Šå‹¢ä¸¹</option>
          </select>
        </div>

        <div class="row">
          <label>ä¸€è¨€ãƒ¡ãƒ¢</label>
          <textarea id="memo" rows="2" placeholder="ä¾‹ï¼šåˆå‹•ã§ç„¦ã£ãŸ"></textarea>
        </div>

        <button class="primary" onclick="save()">ä¿å­˜ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰</button>
        <button class="danger" style="margin-top:8px" onclick="clearAll()">å…¨å‰Šé™¤</button>

      </div>
    </div>

    <!-- ä¸€è¦§ -->
    <div class="card">
      <div class="hd">
        <strong>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</strong>
      </div>
      <div class="bd">

        <div class="stats">
          <div class="stat">
            <div>ä»Šæœˆä»¶æ•°</div>
            <div class="v" id="cnt">0</div>
          </div>
          <div class="stat">
            <div>å‹ç‡</div>
            <div class="v" id="win">â€”</div>
          </div>
        </div>

        <table style="margin-top:14px">
          <thead>
            <tr>
              <th>æ—¥ä»˜</th>
              <th>çµæœ</th>
              <th>æç›Š</th>
              <th>éŠ˜æŸ„</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>

      </div>
    </div>

  </div>
</main>

<script>
  const PASSCODE = "kyoto.3594"; // â†å¿…ãšå¤‰æ›´ã—ã¦ãã ã•ã„
  const KEY = "trade-diary";

  function unlock(){
    const v = document.getElementById("pass").value;
    if(v === PASSCODE){
      localStorage.setItem("unlocked","1");
      document.getElementById("lock").style.display="none";
    }else{
      document.getElementById("err").style.display="block";
    }
  }

  if(localStorage.getItem("unlocked")==="1"){
    document.getElementById("lock").style.display="none";
  }

  function load(){
    return JSON.parse(localStorage.getItem(KEY)||"[]");
  }

  function save(){
    const data = load();
    data.push({
      date:date.value,
      result:result.value,
      pnl:pnl.value,
      symbol:[...symbol.selectedOptions].map(o=>o.value).join(", "),
      memo:memo.value
    });
    localStorage.setItem(KEY,JSON.stringify(data));
    render();
  }

  function clearAll(){
    if(confirm("å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){
      localStorage.removeItem(KEY);
      render();
    }
  }

  function render(){
    const d = load();
    rows.innerHTML="";
    d.forEach(r=>{
      rows.innerHTML+=`<tr>
        <td>${r.date}</td>
        <td>${r.result}</td>
        <td>${r.pnl}</td>
        <td>${r.symbol}</td>
      </tr>`;
    });
    cnt.textContent=d.length;
    const w=d.filter(x=>x.result==="å‹ã¡").length;
    win.textContent=d.length?Math.round(w/d.length*100)+"%":"â€”";
  }

  date.value = new Date().toISOString().slice(0,10);
  render();
</script>

</body>
</html>
