<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥è¨˜ Ultimate</title>

  <style>
    :root{
      --bg:#0b1020; --card:#111a33; --text:#e9eefc; --muted:#9fb0dd;
      --border:rgba(255,255,255,0.12);
      --accent:#67d3ff; --good:#49e3a2; --bad:#ff6b6b; --warn:#ffd166;
      --long:#4facfe; --short:#ff5858; --mix:#a18cd1;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,sans-serif;
      background:radial-gradient(1200px 700px at 20% -10%, #17306b 0%, transparent 55%),
                 radial-gradient(900px 600px at 110% 20%, #2b145b 0%, transparent 55%),
                 var(--bg);
      color:var(--text); padding-bottom:80px;
    }
    .container{max-width:1000px;margin:0 auto;padding:0 16px}
    header{padding:20px 0 10px;display:flex;justify-content:space-between;align-items:end;gap:10px;flex-wrap:wrap}
    h1{font-size:18px;margin:0;font-weight:800;letter-spacing:1px}
    .header-btns{display:flex;gap:8px;flex-wrap:wrap}
    button{border:none;cursor:pointer;padding:6px 12px;border-radius:4px;font-size:12px;font-weight:700}
    .btn-primary{background:var(--accent);color:#0b1020}
    .btn-sec{background:transparent;border:1px solid var(--border);color:var(--muted)}
    .btn-danger{background:rgba(255,107,107,.15);color:var(--bad);border:1px solid rgba(255,107,107,.3)}
    .card{background:rgba(17,26,51,.6);border:1px solid var(--border);border-radius:8px;margin-bottom:16px}
    .card-hd{padding:10px 14px;border-bottom:1px solid var(--border);font-size:12px;color:var(--muted)}
    .card-bd{padding:14px}
    .form-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    label{font-size:11px;color:var(--muted)}
    input,select,textarea{width:100%;background:rgba(0,0,0,.3);border:1px solid var(--border);color:var(--text);padding:8px;border-radius:4px}
    textarea{grid-column:1/-1}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;justify-content:center;align-items:center;z-index:99}
    .modal-box{background:#0f1730;border:1px solid var(--border);border-radius:8px;padding:20px;width:min(600px,100%)}
  </style>
</head>

<body>

<div class="container">
<header>
  <h1>ãƒˆãƒ¬ãƒ¼ãƒ‰æ—¥è¨˜ Ultimate</h1>
  <div class="header-btns">
    <button class="btn-primary" id="btnCopyPrompt">ğŸ“‹ AIæŒ‡ç¤ºæ›¸</button>
    <button class="btn-sec" id="btnLecture">ğŸ“˜ è¬›ç¾©ãƒãƒ¼ãƒˆ</button>
  </div>
</header>

<section class="card">
  <div class="card-hd">ğŸ“ ä»Šæ—¥ã®è¨˜éŒ²</div>
  <div class="card-bd form-grid">
    <div><label>æ—¥ä»˜</label><input type="date" id="date"></div>
    <div><label>çµæœ</label>
      <select id="result">
        <option>æœªå…¥åŠ›</option><option>å‹ã¡</option><option>è² ã‘</option><option>ãƒˆãƒ³ãƒˆãƒ³</option><option>ãƒãƒ¼ãƒˆãƒ¬</option>
      </select>
    </div>
    <div><label>æç›Š</label><input id="pnl" type="number"></div>
    <div><label>ã‚¨ãƒ³ãƒˆãƒªãƒ¼å›æ•°</label><input id="trades" type="number"></div>
    <textarea id="memo" placeholder="åçœãƒ»æ°—ã¥ã"></textarea>
    <button class="btn-primary" id="btnSave">ä¿å­˜</button>
  </div>
</section>

<section class="card">
  <div class="card-hd">ğŸ“Š éå»ã®è¨˜éŒ²</div>
  <div class="card-bd" id="list"></div>
</section>
</div>

<!-- ğŸ“˜ è¬›ç¾©ãƒãƒ¼ãƒˆ -->
<div class="overlay" id="lectureBg">
  <div class="modal-box">
    <h3>ğŸ“˜ ãƒˆãƒ¬ãƒ¼ãƒ‰è¬›ç¾©ãƒãƒ¼ãƒˆ</h3>
    <p>ãƒ»è² ã‘å›é¿ãŒæœ€å„ªå…ˆ<br>ãƒ»åˆå‹•é€ƒã—ãŸã‚‰è¿½ã‚ãªã„<br>ãƒ»è¿·ã£ãŸã‚‰ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã—ãªã„</p>
    <button class="btn-sec" id="btnCloseLecture">é–‰ã˜ã‚‹</button>
  </div>
</div>

<script>
const KEY="tradeDiary_v1";

function loadAll(){return JSON.parse(localStorage.getItem(KEY)||"[]")}
function saveAll(d){localStorage.setItem(KEY,JSON.stringify(d))}
function today(){return new Date().toISOString().slice(0,10)}

const els={
  date:date,result:result,pnl:pnl,trades:trades,memo:memo
};

btnSave.onclick=()=>{
  const all=loadAll();
  const e={
    date:els.date.value||today(),
    result:els.result.value,
    pnl:+els.pnl.value||0,
    trades:+els.trades.value||0,
    memo:els.memo.value,
    updatedAt:new Date().toISOString()
  };
  const i=all.findIndex(x=>x.date===e.date);
  if(i>=0)all[i]=e;else all.push(e);
  saveAll(all);render();
};

function render(){
  list.innerHTML="";
  loadAll().slice().reverse().forEach(e=>{
    const d=document.createElement("div");
    d.textContent=`${e.date}ï½œ${e.result}ï½œ${e.pnl}å††ï½œ${e.memo}`;
    list.appendChild(d);
  });
}

btnLecture.onclick=()=>lectureBg.style.display="flex";
btnCloseLecture.onclick=()=>lectureBg.style.display="none";

els.date.value=today();render();
</script>
</body>
</html>
